"use strict";(self["webpackChunkfindcard"]=self["webpackChunkfindcard"]||[]).push([[223],{8770:function(t,e,s){s.d(e,{Z:function(){return u}});var l=s(3396);const a={class:"bg-primary text-center text-white py-3"},n=(0,l._)("p",{class:"mb-0"},"Copyright © 2022 ChinHsuan Lin",-1),o=(0,l._)("p",{class:"mb-0"},"個人練習作品，非商業用途，素材來源：unsplash、pexels",-1),r=[n,o];function c(t,e){return(0,l.wg)(),(0,l.iD)("footer",a,r)}var i=s(89);const d={},p=(0,i.Z)(d,[["render",c]]);var u=p},2223:function(t,e,s){s.r(e),s.d(e,{default:function(){return as}});var l=s(3396),a=s(7139),n=s(9242);const o=t=>((0,l.dD)("data-v-c2b766d4"),t=t(),(0,l.Cn)(),t),r={key:0,class:"container-fliud banner"},c=o((()=>(0,l._)("div",{class:"bg-dark bg-opacity-75 w-100 h-100 d-flex align-items-center"},[(0,l._)("h1",{class:"w-100 d-flex align-items-center justify-content-center mb-0 mt-5"},[(0,l._)("span",{class:"me-2 fs-1 fw-bolder text-white"},"購物車"),(0,l._)("span",{class:"fs-3 text-primary align-self-end"},"/ Cart")])],-1))),i=[c],d={key:1,class:"container-fluid bg-light pt-5"},p={class:"row"},u={class:"d-none d-lg-block col-lg-10 col-xl-8 mx-auto"},m={key:0,class:"d-flex mt-5"},_=o((()=>(0,l._)("span",{class:"me-2 fw-bolder"},"1. 填寫資訊",-1))),b=o((()=>(0,l._)("span",null,"/ Fill In",-1))),h=[_,b],f=o((()=>(0,l._)("span",{class:"me-2 fw-bolder"},"2. 確認訂單",-1))),x=o((()=>(0,l._)("span",null,"/ Confirm",-1))),g=[f,x],w=o((()=>(0,l._)("span",{class:"me-2 fw-bolder"},"3. 完成訂單",-1))),y=o((()=>(0,l._)("span",null,"/ Checkout",-1))),v=[w,y],k={class:"d-lg-none col-12"},C={key:0,class:"d-flex justify-content-center mt-5"},q=o((()=>(0,l._)("span",{class:"me-2 fw-bolder"},"1. 填寫資訊",-1))),D=o((()=>(0,l._)("span",{class:"align-self-end"},"/ Fill In",-1))),$=[q,D],z=o((()=>(0,l._)("span",{class:"me-2 fw-bolder"},"2. 確認訂單",-1))),I=o((()=>(0,l._)("span",{class:"align-self-end"},"/ Confirm",-1))),V=[z,I],U=o((()=>(0,l._)("span",{class:"me-2 fw-bolder"},"3. 完成訂單",-1))),j=o((()=>(0,l._)("span",{class:"align-self-end"},"/ Checkout",-1))),F=[U,j],O={key:2,class:"d-flex justify-content-center align-items-center bg-light vh-100"},T=o((()=>(0,l._)("div",{class:"spinner-border text-primary",role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1))),B=[T],W={key:3,class:"bg-light"},L={key:0,class:"d-flex flex-column justify-content-center align-items-center text-secondary vh-remain"},N=o((()=>(0,l._)("span",{class:"material-icons cart mb-3"},"production_quantity_limits",-1))),H=o((()=>(0,l._)("p",{class:"fs-5 fw-bold mb-5"},"目前購物車沒有任何商品",-1))),A=(0,l.Uk)("瀏覽商品"),E={key:1,class:"py-sm-5 vh-remain"},Y={class:"container d-none d-md-block"},Z={class:"row"},M={class:"col-lg-10 col-xl-8 mx-auto"},P=o((()=>(0,l._)("h3",{class:"fs-5 text-center border-bottom pb-3"},"購物清單",-1))),K={class:"table table-borderless align-middle mt-3"},S=o((()=>(0,l._)("tr",null,[(0,l._)("th",{width:"60"},"刪除"),(0,l._)("th",{class:"text-center"},"商品"),(0,l._)("th",{class:"text-center d-none d-lg-table-cell"},"單價"),(0,l._)("th",{class:"text-center",width:"150"},"數量"),(0,l._)("th",{class:"text-end px-0",width:"120"},"總計")],-1))),G=["onClick"],J=o((()=>(0,l._)("span",{class:"material-icons"}," delete_outline ",-1))),Q=[J],R={class:"d-flex align-items-center px-0"},X=["src","alt"],tt={class:"ms-3 p-0"},et={class:"d-none d-lg-table-cell text-center"},st={class:"d-flex align-items-center"},lt=["onClick"],at={class:"flex-grow-1 text-center"},nt=["onClick"],ot={key:0,class:"text-success p-0"},rt={class:"input-group pb-4"},ct={class:"w-50 d-flex ms-auto"},it={class:"table table-borderless fw-bold mb-4"},dt=o((()=>(0,l._)("tr",null,[(0,l._)("td",{class:"px-0 pb-0"},"運費"),(0,l._)("td",{class:"text-end px-0 pb-0"},"NT$ 0")],-1))),pt={key:0},ut=o((()=>(0,l._)("td",{class:"px-0"},"總金額",-1))),mt={class:"text-end"},_t={key:1},bt=o((()=>(0,l._)("td",{class:"text-success px-0"},"折扣後總價",-1))),ht={class:"text-end text-success"},ft={class:"text-end"},xt={class:"d-md-none px-3 py-5 py-sm-0"},gt=o((()=>(0,l._)("h3",{class:"fs-5 text-center border-bottom pb-3"},"購物清單",-1))),wt={class:"table table-borderless align-middle mt-3"},yt=o((()=>(0,l._)("tr",null,[(0,l._)("th",{class:"text-center pb-2",width:"60"},"刪除"),(0,l._)("th",{class:"text-center"},"商品"),(0,l._)("th",{class:"text-center"},"數量"),(0,l._)("th",{class:"text-end px-0 d-none d-sm-table-cell",width:"120"},"總計")],-1))),vt=["onClick"],kt=o((()=>(0,l._)("span",{class:"material-icons"}," delete_outline ",-1))),Ct=[kt],qt={class:"d-flex align-items-center px-0"},Dt=["src","alt"],$t={class:"white-space-wrap p-2"},zt={class:"d-flex align-items-center p-0"},It=["onClick"],Vt={class:"flex-grow-1 text-center p-2"},Ut=["onClick"],jt={key:0,class:"text-success p-0"},Ft={class:"input-group pb-4"},Ot={class:"table table-borderless fw-bold"},Tt=o((()=>(0,l._)("tr",null,[(0,l._)("td",{class:"px-0 pb-0"},"運費"),(0,l._)("td",{class:"text-end px-0 pb-0"},"NT$ 0")],-1))),Bt={key:0},Wt=o((()=>(0,l._)("td",{class:"px-0"},"總金額",-1))),Lt={class:"text-end"},Nt={key:1},Ht=o((()=>(0,l._)("td",{class:"text-success px-0"},"折扣價",-1))),At={class:"text-end text-success"},Et={class:"text-end"},Yt={key:1,class:"container"},Zt={class:"row"},Mt={class:"d-none d-lg-block col-6"},Pt=o((()=>(0,l._)("h3",{class:"fs-5 text-center border-bottom pb-3"},"清單明細",-1))),Kt={class:"table table-borderless align-middle mt-3"},St=o((()=>(0,l._)("tr",null,[(0,l._)("th",{class:"text-center"},"商品"),(0,l._)("th",{class:"text-center"},"數量"),(0,l._)("th",{class:"text-end px-0"},"總計")],-1))),Gt={class:"d-flex align-items-center px-0"},Jt=["src","alt"],Qt={class:"ms-3 p-0"},Rt={class:"text-center"},Xt={key:0,class:"text-success p-0"},te={class:"table table-borderless fw-bold mb-4"},ee=o((()=>(0,l._)("tr",null,[(0,l._)("td",{class:"px-0 pb-0"},"運費"),(0,l._)("td",{class:"text-end px-0 pb-0"},"NT$ 0")],-1))),se={key:0},le=o((()=>(0,l._)("td",{class:"px-0"},"總金額",-1))),ae={class:"text-end"},ne={key:1},oe=o((()=>(0,l._)("td",{class:"text-success px-0"},"折扣後總價",-1))),re={class:"text-end text-success"},ce={class:"col-lg-6 py-4 py-sm-0"},ie=o((()=>(0,l._)("h3",{class:"fs-5 text-center border-bottom pb-3"},"顧客資訊",-1))),de={class:"form-floating mb-3"},pe=o((()=>(0,l._)("label",{for:"email",class:"form-label"},"Email*",-1))),ue={class:"form-floating mb-3"},me=o((()=>(0,l._)("label",{for:"name",class:"form-label"},"收件人姓名*",-1))),_e={class:"form-floating mb-3"},be=o((()=>(0,l._)("label",{for:"tel",class:"form-label"},"收件人電話*",-1))),he={class:"form-floating mb-3"},fe=o((()=>(0,l._)("label",{for:"address",class:"form-label"},"收件人地址*",-1))),xe={class:"form-floating mb-3"},ge=o((()=>(0,l._)("label",{for:"ps"},"備註",-1))),we={class:"text-end"},ye=["disabled"],ve={key:0,class:"spinner-border text-white spinner-border-sm",role:"status"},ke=o((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),Ce=[ke],qe=(0,l.Uk)(" 送出訂單 "),De={key:1,class:"col-lg-8 col-xl-6 mx-auto py-4 py-sm-0"},$e=o((()=>(0,l._)("h3",{class:"fs-5 text-center border-bottom pb-3"},"訂單資訊",-1))),ze={class:"accordion my-3",id:"accordionExample"},Ie={class:"accordion-item rounded-0"},Ve=o((()=>(0,l._)("h2",{class:"accordion-header",id:"headingOne"},[(0,l._)("button",{class:"accordion-button collapsed rounded-0",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"}," 商品列表 ")],-1))),Ue={id:"collapseOne",class:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},je={class:"accordion-body"},Fe={class:"table align-middle"},Oe=o((()=>(0,l._)("thead",null,[(0,l._)("th",{class:"fw-normal p-2"},"品名"),(0,l._)("th",{class:"fw-normal p-2"},"數量"),(0,l._)("th",{class:"fw-normal p-2"},"單價")],-1))),Te={class:"text-end"},Be=o((()=>(0,l._)("td",{colspan:"2",class:"text-end"},"總計",-1))),We={class:"text-end"},Le={class:"table table-hover"},Ne=o((()=>(0,l._)("th",{width:"120"},"訂單編號",-1))),He=o((()=>(0,l._)("th",{width:"150"},"Email",-1))),Ae=o((()=>(0,l._)("th",null,"姓名",-1))),Ee=o((()=>(0,l._)("th",null,"收件人電話",-1))),Ye=o((()=>(0,l._)("th",null,"收件人地址",-1))),Ze=o((()=>(0,l._)("th",null,"備註",-1))),Me=o((()=>(0,l._)("tr",null,[(0,l._)("th",null,"付款狀態"),(0,l._)("td",null,[(0,l._)("span",{class:"text-muted"},"尚未付款")])],-1))),Pe={class:"text-end mt-3"},Ke={class:"text-end"},Se={key:2,class:"col-md-10 col-xl-8 mx-auto py-4 py-sm-0"},Ge={class:"bg-white d-flex flex-column text-center p-4 p-sm-5"},Je=(0,l.uE)('<span class="material-icons checkCircle text-primary mb-3" data-v-c2b766d4>check_circle</span><p class="fs-2 fw-bold mb-4 mb-sm-5" data-v-c2b766d4>付款成功</p><p class="mb-0" data-v-c2b766d4>感謝您的訂購</p><p class="mb-0" data-v-c2b766d4>商品預計於三個工作天內寄送（不含週休及國定例假日）</p><p class="mb-3" data-v-c2b766d4>再請留意簡訊通知及配送人員的電話 </p>',5),Qe=(0,l.Uk)("回去購物");function Re(t,e,s,o,c,_){const b=(0,l.up)("router-link"),f=(0,l.up)("VField"),x=(0,l.up)("ErrorMessage"),w=(0,l.up)("VForm"),y=(0,l.up)("Footer");return(0,l.wg)(),(0,l.iD)(l.HY,null,[0===c.step?((0,l.wg)(),(0,l.iD)("div",r,i)):((0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("div",p,[(0,l._)("div",u,[0!==c.step?((0,l.wg)(),(0,l.iD)("div",m,[(0,l._)("h1",{class:(0,a.C_)(["flex-grow-1 d-flex align-items-end justify-content-center mb-0",{active:1===c.step,inactive:1!==c.step}])},h,2),(0,l._)("h1",{class:(0,a.C_)(["flex-grow-1 d-flex align-items-end justify-content-center mb-0",{active:2===c.step,inactive:2!==c.step}])},g,2),(0,l._)("h1",{class:(0,a.C_)(["flex-grow-1 d-flex align-items-end justify-content-center mb-0",{active:3===c.step,inactive:3!==c.step}])},v,2)])):(0,l.kq)("",!0)]),(0,l._)("div",k,[0!==c.step?((0,l.wg)(),(0,l.iD)("div",C,[(0,l._)("h1",{class:(0,a.C_)(["d-flex align-items-center justify-content-center mb-0",{active:1===c.step,"d-none":1!==c.step}])},$,2),(0,l._)("h1",{class:(0,a.C_)(["d-flex align-items-center justify-content-center mb-0",{active:2===c.step,"d-none":2!==c.step}])},V,2),(0,l._)("h1",{class:(0,a.C_)(["d-flex align-items-center justify-content-center mb-0",{active:3===c.step,"d-none":3!==c.step}])},F,2)])):(0,l.kq)("",!0)])])])),c.isLoading?((0,l.wg)(),(0,l.iD)("div",O,B)):((0,l.wg)(),(0,l.iD)("div",W,[c.cart.carts.length?((0,l.wg)(),(0,l.iD)("div",E,[0===c.step?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",Y,[(0,l._)("div",Z,[(0,l._)("div",M,[P,(0,l._)("table",K,[S,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.cart.carts,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",null,[(0,l._)("button",{type:"button",class:"btn btn-outline-danger btn-sm border border-danger p-2 d-flex align-items-center",onClick:e=>_.delCartModal(t)},Q,8,G)]),(0,l._)("td",R,[(0,l._)("img",{src:t.product.imageUrl,class:"productImg",alt:t.product.title},null,8,X),(0,l._)("span",tt,(0,a.zw)(t.product.title),1)]),(0,l._)("td",et,"$"+(0,a.zw)(t.product.price),1),(0,l._)("td",null,[(0,l._)("div",st,[(0,l._)("span",{class:"material-icons text-primary p-2 qtyCounter",onClick:e=>_.qtyAdjust(t,-1)},"remove",8,lt),(0,l._)("span",at,(0,a.zw)(t.qty),1),(0,l._)("span",{class:"material-icons text-primary p-2 qtyCounter",onClick:e=>_.qtyAdjust(t,1)},"add",8,nt)])]),(0,l._)("td",{class:(0,a.C_)(["text-end px-0",{"text-success":t.coupon}])},[t.coupon?((0,l.wg)(),(0,l.iD)("small",ot,"折扣價：")):(0,l.kq)("",!0),(0,l.Uk)(" $"+(0,a.zw)(parseInt(t.final_total)),1)],2)])))),128))]),(0,l._)("div",rt,[(0,l._)("button",{class:"btn btn-outline-danger me-5",type:"button",onClick:e[0]||(e[0]=t=>_.delCartModal())}," 清空購物車 "),(0,l._)("div",ct,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control rounded-0",placeholder:"請輸入優惠碼","onUpdate:modelValue":e[1]||(e[1]=t=>c.coupon=t)},null,512),[[n.nr,c.coupon]]),(0,l._)("button",{class:"btn btn-outline-primary fw-bold",type:"button",onClick:e[2]||(e[2]=(...t)=>_.useCoupon&&_.useCoupon(...t))}," 套用優惠碼 ")])]),(0,l._)("table",it,[dt,c.cart.total===c.cart.final_total?((0,l.wg)(),(0,l.iD)("tr",pt,[ut,(0,l._)("td",mt,"NT$ "+(0,a.zw)(c.cart.total),1)])):((0,l.wg)(),(0,l.iD)("tr",_t,[bt,(0,l._)("td",ht," NT$ "+(0,a.zw)(parseInt(c.cart.final_total)),1)]))]),(0,l._)("div",ft,[(0,l._)("button",{type:"button",class:"btn btn-primary btn-lg text-white fw-bold",onClick:e[3]||(e[3]=t=>c.step=1)},"確認結帳")])])])]),(0,l._)("div",xt,[gt,(0,l._)("table",wt,[yt,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.cart.carts,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",null,[(0,l._)("button",{type:"button",class:"btn btn-outline-danger btn-sm border border-danger ms-2 p-2 d-flex align-items-center",onClick:e=>_.delCartModal(t)},Ct,8,vt)]),(0,l._)("td",qt,[(0,l._)("img",{src:t.product.imageUrl,class:"d-none d-sm-block productImg px-0 me-2",alt:t.product.title},null,8,Dt),(0,l._)("span",$t,(0,a.zw)(t.product.title),1)]),(0,l._)("td",null,[(0,l._)("div",zt,[(0,l._)("span",{class:"material-icons text-primary p-2 qtyCounter",onClick:e=>_.qtyAdjust(t,-1)},"remove",8,It),(0,l._)("span",Vt,(0,a.zw)(t.qty),1),(0,l._)("span",{class:"material-icons text-primary p-2 qtyCounter",onClick:e=>_.qtyAdjust(t,1)},"add",8,Ut)])]),(0,l._)("td",{class:(0,a.C_)(["text-end px-0 d-none d-sm-table-cell",{"text-success":t.coupon}])},[t.coupon?((0,l.wg)(),(0,l.iD)("small",jt,"折扣價：")):(0,l.kq)("",!0),(0,l.Uk)(" $"+(0,a.zw)(parseInt(t.final_total)),1)],2)])))),128))]),(0,l._)("div",Ft,[(0,l._)("button",{class:"d-none d-sm-block btn btn-outline-danger me-2 me-sm-5",type:"button",onClick:e[4]||(e[4]=t=>_.delCartModal())}," 清空購物車 "),(0,l.wy)((0,l._)("input",{type:"text",class:"form-control rounded-0",placeholder:"請輸入優惠碼","onUpdate:modelValue":e[5]||(e[5]=t=>c.coupon=t)},null,512),[[n.nr,c.coupon]]),(0,l._)("button",{class:"btn btn-outline-primary fw-bold",type:"button",onClick:e[6]||(e[6]=(...t)=>_.useCoupon&&_.useCoupon(...t))}," 套用優惠碼 ")]),(0,l._)("table",Ot,[Tt,c.cart.total===c.cart.final_total?((0,l.wg)(),(0,l.iD)("tr",Bt,[Wt,(0,l._)("td",Lt,"NT$ "+(0,a.zw)(c.cart.total),1)])):((0,l.wg)(),(0,l.iD)("tr",Nt,[Ht,(0,l._)("td",At," NT$ "+(0,a.zw)(parseInt(c.cart.final_total)),1)]))]),(0,l._)("div",Et,[(0,l._)("button",{type:"button",class:"btn btn-primary btn-lg text-white fw-bold",onClick:e[7]||(e[7]=t=>c.step=1)},"確認結帳")])])],64)):(0,l.kq)("",!0),0!==c.step?((0,l.wg)(),(0,l.iD)("div",Yt,[(0,l._)("div",Zt,[1===c.step?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",Mt,[Pt,(0,l._)("table",Kt,[St,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.cart.carts,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",Gt,[(0,l._)("img",{src:t.product.imageUrl,class:"productImg",alt:t.product.title},null,8,Jt),(0,l._)("span",Qt,(0,a.zw)(t.product.title),1)]),(0,l._)("td",Rt,(0,a.zw)(t.qty),1),(0,l._)("td",{class:(0,a.C_)(["text-end px-0",{"text-success":t.coupon}])},[t.coupon?((0,l.wg)(),(0,l.iD)("small",Xt,"折扣價：")):(0,l.kq)("",!0),(0,l.Uk)(" $"+(0,a.zw)(parseInt(t.final_total)),1)],2)])))),128))]),(0,l._)("table",te,[ee,c.cart.total===c.cart.final_total?((0,l.wg)(),(0,l.iD)("tr",se,[le,(0,l._)("td",ae,"NT$ "+(0,a.zw)(c.cart.total),1)])):((0,l.wg)(),(0,l.iD)("tr",ne,[oe,(0,l._)("td",re," NT$ "+(0,a.zw)(parseInt(c.cart.final_total)),1)]))])]),(0,l._)("div",ce,[ie,(0,l.Wm)(w,{class:"mt-3",onSubmit:_.createOrder},{default:(0,l.w5)((({errors:t})=>[(0,l._)("div",de,[(0,l.Wm)(f,{id:"email",name:"email",type:"email",class:(0,a.C_)(["form-control",{"is-invalid":t["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:c.form.user.email,"onUpdate:modelValue":e[8]||(e[8]=t=>c.form.user.email=t)},null,8,["class","modelValue"]),pe,(0,l.Wm)(x,{name:"email",class:"invalid-feedback"})]),(0,l._)("div",ue,[(0,l.Wm)(f,{id:"name",name:"姓名",type:"text",class:(0,a.C_)(["form-control",{"is-invalid":t["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:c.form.user.name,"onUpdate:modelValue":e[9]||(e[9]=t=>c.form.user.name=t)},null,8,["class","modelValue"]),me,(0,l.Wm)(x,{name:"姓名",class:"invalid-feedback"})]),(0,l._)("div",_e,[(0,l.Wm)(f,{id:"tel",name:"電話",type:"tel",class:(0,a.C_)(["form-control",{"is-invalid":t["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:c.form.user.tel,"onUpdate:modelValue":e[10]||(e[10]=t=>c.form.user.tel=t)},null,8,["class","modelValue"]),be,(0,l.Wm)(x,{name:"電話",class:"invalid-feedback"})]),(0,l._)("div",he,[(0,l.Wm)(f,{id:"address",name:"地址",type:"text",class:(0,a.C_)(["form-control",{"is-invalid":t["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:c.form.user.address,"onUpdate:modelValue":e[11]||(e[11]=t=>c.form.user.address=t)},null,8,["class","modelValue"]),fe,(0,l.Wm)(x,{name:"地址",class:"invalid-feedback"})]),(0,l._)("div",xe,[(0,l.wy)((0,l._)("textarea",{class:"form-control",id:"ps",placeholder:"備註留言",style:{height:"150px"},"onUpdate:modelValue":e[12]||(e[12]=t=>c.form.message=t)},null,512),[[n.nr,c.form.message]]),ge]),(0,l._)("div",we,[(0,l._)("button",{type:"submit",class:"btn btn-primary btn-lg w-100 fw-bold text-white",disabled:!c.isFillIn,onSubmit:e[13]||(e[13]=(...t)=>_.createOrder&&_.createOrder(...t))},[c.isOrderLoading?((0,l.wg)(),(0,l.iD)("div",ve,Ce)):(0,l.kq)("",!0),qe],40,ye)])])),_:1},8,["onSubmit"])])],64)):(0,l.kq)("",!0),2===c.step?((0,l.wg)(),(0,l.iD)("div",De,[$e,(0,l._)("div",ze,[(0,l._)("div",Ie,[Ve,(0,l._)("div",Ue,[(0,l._)("div",je,[(0,l._)("table",Fe,[Oe,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.order.products,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",null,(0,a.zw)(t.product.title),1),(0,l._)("td",null,(0,a.zw)(t.qty)+" / "+(0,a.zw)(t.product.unit),1),(0,l._)("td",Te,(0,a.zw)(t.total),1)])))),128))]),(0,l._)("tfoot",null,[(0,l._)("tr",null,[Be,(0,l._)("td",We,(0,a.zw)(c.order.total),1)])])])])])])]),(0,l._)("table",Le,[(0,l._)("tbody",null,[(0,l._)("tr",null,[Ne,(0,l._)("td",null,(0,a.zw)(c.order.id),1)]),(0,l._)("tr",null,[He,(0,l._)("td",null,(0,a.zw)(c.order.user.email),1)]),(0,l._)("tr",null,[Ae,(0,l._)("td",null,(0,a.zw)(c.order.user.name),1)]),(0,l._)("tr",null,[Ee,(0,l._)("td",null,(0,a.zw)(c.order.user.tel),1)]),(0,l._)("tr",null,[Ye,(0,l._)("td",null,(0,a.zw)(c.order.user.address),1)]),(0,l._)("tr",null,[Ze,(0,l._)("td",null,(0,a.zw)(c.order.message),1)]),Me])]),(0,l._)("p",Pe,"訂單成立時間："+(0,a.zw)(t.$filters.date(c.order.create_at)),1),(0,l._)("div",Ke,[(0,l._)("button",{class:"btn btn-primary fs-5 text-white fw-bold w-100 py-3",type:"button",onClick:e[14]||(e[14]=(...t)=>_.payOrder&&_.payOrder(...t))},"確認付款")])])):(0,l.kq)("",!0),3===c.step?((0,l.wg)(),(0,l.iD)("div",Se,[(0,l._)("div",Ge,[Je,(0,l.Wm)(b,{to:"/products",class:"btn btn-primary fs-5 text-white fw-bold w-100 py-3"},{default:(0,l.w5)((()=>[Qe])),_:1})])])):(0,l.kq)("",!0)])])):(0,l.kq)("",!0)])):((0,l.wg)(),(0,l.iD)("div",L,[N,H,(0,l.Wm)(b,{to:"/products",type:"button",class:"btn btn-primary fs-5 fw-bold text-white mt-3 px-4 py-3"},{default:(0,l.w5)((()=>[A])),_:1})]))])),(0,l.Wm)(y)],64)}var Xe=s(8557),ts=s(8770),es={data(){return{step:0,cart:{carts:[]},coupon:"",isLoading:!1,isOrderLoading:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""},isFillIn:!1,orderId:"",order:{}}},components:{Footer:ts.Z},watch:{form:{handler(t){t.user.address&&t.user.tel&&t.user.email&&t.user.name&&(this.isFillIn=!0)},deep:!0}},methods:{getCart(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/vuefindcard/cart";this.$http.get(t).then((t=>{t.data.success&&(this.cart=t.data.data),this.isLoading=!1}))},delCartModal(t){t?this.$swal({toast:!1,timer:void 0,timerProgressBar:!1,position:"center",icon:"question",showCancelButton:!0,showConfirmButton:!0,confirmButtonColor:"#FF5959",confirmButtonText:"刪除",cancelButtonText:"取消",title:`是否刪除${t.product.title}？`,text:"一旦刪除便無法復原",width:"34rem"}).then((e=>{e.isConfirmed&&this.delCartProduct(t.id)})):this.$swal({toast:!1,timer:void 0,timerProgressBar:!1,position:"center",icon:"question",showCancelButton:!0,showConfirmButton:!0,confirmButtonColor:"#FF5959",confirmButtonText:"刪除",cancelButtonText:"取消",title:"是否刪除全部商品？",text:"一旦刪除便無法復原",width:"25rem"}).then((t=>{t.isConfirmed&&this.delAllCartProducts()}))},delCartProduct(t){const e=`https://vue3-course-api.hexschool.io/api/vuefindcard/cart/${t}`;this.$http.delete(e).then((()=>{Xe.Z.emit("update-cart"),this.getCart()}))},qtyAdjust(t,e){if(1===t.qty&&-1===e)return;t.qty+=e;const s=`https://vue3-course-api.hexschool.io/api/vuefindcard/cart/${t.id}`;this.$http.put(s,{data:{product_id:t.id,qty:t.qty}}).then((()=>{this.getCart()}))},delAllCartProducts(){const t="https://vue3-course-api.hexschool.io/api/vuefindcard/carts";this.$http.delete(t).then((()=>{Xe.Z.emit("update-cart"),this.getCart()}))},useCoupon(){const t="https://vue3-course-api.hexschool.io/api/vuefindcard/coupon";this.$http.post(t,{data:{code:this.coupon}}).then((t=>{t.data.success?(this.getCart(),this.$swal({title:"已套用優惠券",width:"15rem"}),this.coupon=""):""===this.coupon?this.$swal({icon:"info",title:"請輸入優惠券",width:"16rem"}):this.$swal({icon:"error",iconColor:"#FF5959",title:"無此優惠券",width:"14rem"})}))},createOrder(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/vuefindcard/order",e=this.form;this.$http.post(t,{data:e}).then((t=>{Xe.Z.emit("update-cart"),this.orderId=t.data.orderId,this.getOrder(this.orderId),this.isLoading=!1,this.step=2}))},getOrder(t){const e=`https://vue3-course-api.hexschool.io/api/vuefindcard/order/${t}`;this.$http.get(e).then((t=>{this.order=t.data.order}))},payOrder(){const t=this.orderId,e=`https://vue3-course-api.hexschool.io/api/vuefindcard/pay/${t}`;this.$http.post(e).then((()=>{this.step=3}))}},created(){this.getCart()}},ss=s(89);const ls=(0,ss.Z)(es,[["render",Re],["__scopeId","data-v-c2b766d4"]]);var as=ls}}]);
//# sourceMappingURL=223.8e66d004.js.map