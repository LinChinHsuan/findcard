"use strict";(self["webpackChunkfindcard"]=self["webpackChunkfindcard"]||[]).push([[486],{958:function(t,e,s){s.d(e,{Z:function(){return u}});var l=s(3396);const a={class:"bg-primary text-center text-white py-3"},n=(0,l._)("p",{class:"mb-0"},"Copyright © 2022 ChinHsuan Lin",-1),c=(0,l._)("p",{class:"mb-0"},"個人練習作品，非商業用途，素材來源：unsplash、pexels",-1),r=[n,c];function d(t,e){return(0,l.wg)(),(0,l.iD)("footer",a,r)}var o=s(89);const i={},p=(0,o.Z)(i,[["render",d]]);var u=p},3486:function(t,e,s){s.r(e),s.d(e,{default:function(){return ns}});var l=s(3396),a=s(7139),n=s(9242);const c=t=>((0,l.dD)("data-v-0b58b2d0"),t=t(),(0,l.Cn)(),t),r={key:0,class:"container-fliud banner"},d=c((()=>(0,l._)("div",{class:"bg-dark bg-opacity-75 w-100 h-100 d-flex align-items-center"},[(0,l._)("h1",{class:"w-100 d-flex align-items-center justify-content-center mb-0 mt-5"},[(0,l._)("span",{class:"pb-2 me-2 fs-1 fw-bolder text-white"},"購物車"),(0,l._)("span",{class:"fs-3 text-primary align-self-end"},"/ Cart")])],-1))),o=[d],i={key:1,class:"container-fliud bg-light pt-5"},p={class:"row"},u={class:"d-none d-lg-block col-lg-10 col-xl-8 mx-auto"},m={key:0,class:"d-flex mt-5 mb-3"},b=c((()=>(0,l._)("span",{class:"pb-2 me-2 fw-bolder"},"1. 填寫資訊",-1))),_=c((()=>(0,l._)("span",null,"/ Fill In",-1))),h=[b,_],f=c((()=>(0,l._)("span",{class:"pb-2 me-2 fw-bolder"},"2. 確認訂單",-1))),x=c((()=>(0,l._)("span",null,"/ Confirm",-1))),g=[f,x],w=c((()=>(0,l._)("span",{class:"pb-2 me-2 fw-bolder"},"3. 完成訂單",-1))),y=c((()=>(0,l._)("span",null,"/ Checkout",-1))),v=[w,y],k={class:"d-lg-none col-md-8 mx-auto"},C={key:0,class:"d-flex justify-content-center mt-5 mb-3"},D=c((()=>(0,l._)("span",{class:"pb-2 me-2 fw-bolder"},"1. 填寫資訊",-1))),q=c((()=>(0,l._)("span",{class:"align-self-end"},"/ Fill In",-1))),z=[D,q],$=c((()=>(0,l._)("span",{class:"pb-2 me-2 fw-bolder"},"2. 確認訂單",-1))),I=c((()=>(0,l._)("span",{class:"align-self-end"},"/ Confirm",-1))),V=[$,I],U=c((()=>(0,l._)("span",{class:"pb-2 me-2 fw-bolder"},"3. 完成訂單",-1))),j=c((()=>(0,l._)("span",{class:"align-self-end"},"/ Checkout",-1))),O=[U,j],W={key:2,class:"d-flex justify-content-center align-items-center bg-light vh-100"},L=c((()=>(0,l._)("div",{class:"spinner-border text-primary",role:"status"},[(0,l._)("span",{class:"visually-hidden"},"Loading...")],-1))),A=[L],F={key:3,class:"bg-light"},N={key:0,class:"d-flex flex-column justify-content-center align-items-center text-secondary vh-remain"},T=c((()=>(0,l._)("span",{class:"material-icons cart mb-3"},"production_quantity_limits",-1))),H=c((()=>(0,l._)("p",{class:"fs-5 fw-bold mb-5"},"目前購物車沒有任何商品",-1))),P=(0,l.Uk)("瀏覽商品"),E={key:1,class:"py-5"},Y={class:"container d-none d-md-block"},Z={class:"row"},K={class:"col-lg-10 col-xl-8 mx-auto"},S=c((()=>(0,l._)("h3",{class:"fs-5 text-center border-bottom pb-3"},"購物清單",-1))),M={class:"table table-borderless align-middle mt-3"},B=c((()=>(0,l._)("tr",null,[(0,l._)("th",{width:"60"},"刪除"),(0,l._)("th",{class:"text-center"},"商品"),(0,l._)("th",{class:"text-center d-none d-lg-table-cell"},"單價"),(0,l._)("th",{class:"text-center",width:"150"},"數量"),(0,l._)("th",{class:"text-end px-0",width:"120"},"總計")],-1))),G=["onClick"],J=c((()=>(0,l._)("span",{class:"material-icons"}," delete_outline ",-1))),Q=[J],R={class:"d-flex align-items-center px-0"},X=["src","alt"],tt={class:"ms-3 p-0"},et={class:"d-none d-lg-table-cell text-center"},st={class:"d-flex align-items-center"},lt=["onClick"],at={class:"flex-grow-1 text-center"},nt=["onClick"],ct={key:0,class:"text-success p-0"},rt={class:"input-group pb-4"},dt={class:"w-50 d-flex ms-auto"},ot={class:"table table-borderless fw-bold mb-4"},it=c((()=>(0,l._)("tr",null,[(0,l._)("td",{class:"px-0 pb-0"},"運費"),(0,l._)("td",{class:"text-end px-0 pb-0"},"NT$ 0")],-1))),pt={key:0},ut=c((()=>(0,l._)("td",{class:"px-0"},"總金額",-1))),mt={class:"text-end"},bt={key:1},_t=c((()=>(0,l._)("td",{class:"text-success px-0"},"折扣後總價",-1))),ht={class:"text-end text-success"},ft={class:"text-end"},xt={class:"d-md-none px-3"},gt=c((()=>(0,l._)("h3",{class:"fs-5 text-center border-bottom pb-3"},"購物清單",-1))),wt={class:"table table-borderless align-middle mt-3"},yt=c((()=>(0,l._)("tr",null,[(0,l._)("th",{class:"d-none d-sm-table-cell",width:"60"},"刪除"),(0,l._)("th",{class:"text-center"},"商品"),(0,l._)("th",{class:"text-center",width:"150"},"數量"),(0,l._)("th",{class:"text-end px-0 d-none d-sm-table-cell",width:"120"},"總計")],-1))),vt={class:"d-none d-sm-table-cell"},kt=["onClick"],Ct=c((()=>(0,l._)("span",{class:"material-icons"}," delete_outline ",-1))),Dt=[Ct],qt={class:"d-flex align-items-center px-0"},zt=["src","alt"],$t={class:"p-0 py-2"},It={class:"d-flex align-items-center p-0"},Vt=["onClick"],Ut={class:"flex-grow-1 text-center"},jt=["onClick"],Ot={key:0,class:"text-success p-0"},Wt={class:"input-group pb-4"},Lt={class:"table table-borderless fw-bold"},At=c((()=>(0,l._)("tr",null,[(0,l._)("td",{class:"px-0 pb-0"},"運費"),(0,l._)("td",{class:"text-end px-0 pb-0"},"NT$ 0")],-1))),Ft={key:0},Nt=c((()=>(0,l._)("td",{class:"px-0"},"總金額",-1))),Tt={class:"text-end"},Ht={key:1},Pt=c((()=>(0,l._)("td",{class:"text-success px-0"},"折扣價",-1))),Et={class:"text-end text-success"},Yt={class:"text-end"},Zt={key:1,class:"container"},Kt={class:"row gx-5"},St={class:"d-none d-lg-block col-6"},Mt=c((()=>(0,l._)("h3",{class:"fs-5 text-center border-bottom pb-3"},"清單明細",-1))),Bt={class:"table table-borderless align-middle mt-3"},Gt=c((()=>(0,l._)("tr",null,[(0,l._)("th",{class:"text-center"},"商品"),(0,l._)("th",{class:"text-center"},"數量"),(0,l._)("th",{class:"text-end px-0"},"總計")],-1))),Jt={class:"d-flex align-items-center px-0"},Qt=["src","alt"],Rt={class:"ms-3 p-0"},Xt={class:"text-center"},te={key:0,class:"text-success p-0"},ee={class:"table table-borderless fw-bold mb-4"},se=c((()=>(0,l._)("tr",null,[(0,l._)("td",{class:"px-0 pb-0"},"運費"),(0,l._)("td",{class:"text-end px-0 pb-0"},"NT$ 0")],-1))),le={key:0},ae=c((()=>(0,l._)("td",{class:"px-0"},"總金額",-1))),ne={class:"text-end"},ce={key:1},re=c((()=>(0,l._)("td",{class:"text-success px-0"},"折扣後總價",-1))),de={class:"text-end text-success"},oe={class:"col-lg-6"},ie=c((()=>(0,l._)("h3",{class:"fs-5 text-center border-bottom pb-3"},"顧客資訊",-1))),pe={class:"form-floating mb-3"},ue=c((()=>(0,l._)("label",{for:"email",class:"form-label"},"Email*",-1))),me={class:"form-floating mb-3"},be=c((()=>(0,l._)("label",{for:"name",class:"form-label"},"收件人姓名*",-1))),_e={class:"form-floating mb-3"},he=c((()=>(0,l._)("label",{for:"tel",class:"form-label"},"收件人電話*",-1))),fe={class:"form-floating mb-3"},xe=c((()=>(0,l._)("label",{for:"address",class:"form-label"},"收件人地址*",-1))),ge={class:"form-floating mb-3"},we=c((()=>(0,l._)("label",{for:"ps"},"備註",-1))),ye={class:"text-end"},ve=["disabled"],ke={key:0,class:"spinner-border text-white spinner-border-sm",role:"status"},Ce=c((()=>(0,l._)("span",{class:"visually-hidden"},"Loading...",-1))),De=[Ce],qe=(0,l.Uk)(" 送出訂單 "),ze={key:1,class:"col-lg-8 col-xl-6 mx-auto"},$e=c((()=>(0,l._)("h3",{class:"fs-5 text-center border-bottom pb-3"},"訂單資訊",-1))),Ie={class:"accordion my-3",id:"accordionExample"},Ve={class:"accordion-item rounded-0"},Ue=c((()=>(0,l._)("h2",{class:"accordion-header",id:"headingOne"},[(0,l._)("button",{class:"accordion-button collapsed rounded-0",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"}," 商品列表 ")],-1))),je={id:"collapseOne",class:"accordion-collapse collapse","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},Oe={class:"accordion-body"},We={class:"table align-middle"},Le=c((()=>(0,l._)("thead",null,[(0,l._)("th",{class:"fw-normal p-2"},"品名"),(0,l._)("th",{class:"fw-normal p-2"},"數量"),(0,l._)("th",{class:"fw-normal p-2"},"單價")],-1))),Ae={class:"text-end"},Fe=c((()=>(0,l._)("td",{colspan:"2",class:"text-end"},"總計",-1))),Ne={class:"text-end"},Te={class:"table table-hover"},He=c((()=>(0,l._)("th",{width:"120"},"訂單編號",-1))),Pe=c((()=>(0,l._)("th",{width:"150"},"Email",-1))),Ee=c((()=>(0,l._)("th",null,"姓名",-1))),Ye=c((()=>(0,l._)("th",null,"收件人電話",-1))),Ze=c((()=>(0,l._)("th",null,"收件人地址",-1))),Ke=c((()=>(0,l._)("th",null,"備註",-1))),Se=c((()=>(0,l._)("tr",null,[(0,l._)("th",null,"付款狀態"),(0,l._)("td",null,[(0,l._)("span",{class:"text-muted"},"尚未付款")])],-1))),Me={class:"text-end mt-3"},Be={class:"text-end"},Ge={key:2,class:"col-md-10 col-xl-8 mx-auto"},Je={class:"bg-white d-flex flex-column text-center p-5 mt-5"},Qe=(0,l.uE)('<span class="material-icons checkCircle text-primary mb-3" data-v-0b58b2d0>check_circle</span><p class="fs-2 fw-bold mb-5" data-v-0b58b2d0>付款成功</p><p class="mb-0" data-v-0b58b2d0>感謝您的訂購</p><p class="mb-0" data-v-0b58b2d0>商品預計於三個工作天內寄送（不含週休及國定例假日）</p><p class="mb-3" data-v-0b58b2d0>再請留意簡訊通知及配送人員的電話 </p>',5),Re=(0,l.Uk)("回去購物");function Xe(t,e,s,c,d,b){const _=(0,l.up)("router-link"),f=(0,l.up)("VField"),x=(0,l.up)("ErrorMessage"),w=(0,l.up)("VForm"),y=(0,l.up)("Footer");return(0,l.wg)(),(0,l.iD)(l.HY,null,[0===d.step?((0,l.wg)(),(0,l.iD)("div",r,o)):((0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",p,[(0,l._)("div",u,[0!==d.step?((0,l.wg)(),(0,l.iD)("div",m,[(0,l._)("h1",{class:(0,a.C_)(["flex-grow-1 d-flex align-items-end justify-content-center mb-0",{active:1===d.step,inactive:1!==d.step}])},h,2),(0,l._)("h1",{class:(0,a.C_)(["flex-grow-1 d-flex align-items-end justify-content-center mb-0",{active:2===d.step,inactive:2!==d.step}])},g,2),(0,l._)("h1",{class:(0,a.C_)(["flex-grow-1 d-flex align-items-end justify-content-center mb-0",{active:3===d.step,inactive:3!==d.step}])},v,2)])):(0,l.kq)("",!0)]),(0,l._)("div",k,[0!==d.step?((0,l.wg)(),(0,l.iD)("div",C,[(0,l._)("h1",{class:(0,a.C_)(["d-flex align-items-center justify-content-center mb-0",{active:1===d.step,"d-none":1!==d.step}])},z,2),(0,l._)("h1",{class:(0,a.C_)(["d-flex align-items-center justify-content-center mb-0",{active:2===d.step,"d-none":2!==d.step}])},V,2),(0,l._)("h1",{class:(0,a.C_)(["d-flex align-items-center justify-content-center mb-0",{active:3===d.step,"d-none":3!==d.step}])},O,2)])):(0,l.kq)("",!0)])])])),d.isLoading?((0,l.wg)(),(0,l.iD)("div",W,A)):((0,l.wg)(),(0,l.iD)("div",F,[d.cart.carts.length?((0,l.wg)(),(0,l.iD)("div",E,[0===d.step?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",Y,[(0,l._)("div",Z,[(0,l._)("div",K,[S,(0,l._)("table",M,[B,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.cart.carts,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",null,[(0,l._)("button",{type:"button",class:"btn btn-outline-danger btn-sm border border-danger p-2 d-flex align-items-center",onClick:e=>b.delCartProduct(t.id)},Q,8,G)]),(0,l._)("td",R,[(0,l._)("img",{src:t.product.imageUrl,class:"productImg",alt:t.product.title},null,8,X),(0,l._)("span",tt,(0,a.zw)(t.product.title),1)]),(0,l._)("td",et,"$"+(0,a.zw)(t.product.price),1),(0,l._)("td",null,[(0,l._)("div",st,[(0,l._)("span",{class:"material-icons text-primary p-2 qtyCounter",onClick:e=>b.qtyAdjust(t,-1)},"remove",8,lt),(0,l._)("span",at,(0,a.zw)(t.qty),1),(0,l._)("span",{class:"material-icons text-primary p-2 qtyCounter",onClick:e=>b.qtyAdjust(t,1)},"add",8,nt)])]),(0,l._)("td",{class:(0,a.C_)(["text-end px-0",{"text-success":t.coupon}])},[t.coupon?((0,l.wg)(),(0,l.iD)("small",ct,"折扣價：")):(0,l.kq)("",!0),(0,l.Uk)(" $"+(0,a.zw)(parseInt(t.final_total)),1)],2)])))),128))]),(0,l._)("div",rt,[(0,l._)("button",{class:"btn btn-outline-danger me-5",type:"button",onClick:e[0]||(e[0]=(...t)=>b.delAllCartProducts&&b.delAllCartProducts(...t))}," 清空購物車 "),(0,l._)("div",dt,[(0,l.wy)((0,l._)("input",{type:"text",class:"form-control rounded-0",placeholder:"請輸入優惠碼","onUpdate:modelValue":e[1]||(e[1]=t=>d.coupon=t)},null,512),[[n.nr,d.coupon]]),(0,l._)("button",{class:"btn btn-outline-primary fw-bold",type:"button",onClick:e[2]||(e[2]=(...t)=>b.useCoupon&&b.useCoupon(...t))}," 套用優惠碼 ")])]),(0,l._)("table",ot,[it,d.cart.total===d.cart.final_total?((0,l.wg)(),(0,l.iD)("tr",pt,[ut,(0,l._)("td",mt,"NT$ "+(0,a.zw)(d.cart.total),1)])):((0,l.wg)(),(0,l.iD)("tr",bt,[_t,(0,l._)("td",ht," NT$ "+(0,a.zw)(parseInt(d.cart.final_total)),1)]))]),(0,l._)("div",ft,[(0,l._)("button",{type:"button",class:"btn btn-primary btn-lg text-white fw-bold",onClick:e[3]||(e[3]=t=>d.step=1)},"確認結帳")])])])]),(0,l._)("div",xt,[gt,(0,l._)("table",wt,[yt,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.cart.carts,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",vt,[(0,l._)("button",{type:"button",class:"btn btn-outline-danger btn-sm border border-danger p-2 d-flex align-items-center",onClick:e=>b.delCartProduct(t.id)},Dt,8,kt)]),(0,l._)("td",qt,[(0,l._)("img",{src:t.product.imageUrl,class:"productImg px-0 me-2",alt:t.product.title},null,8,zt),(0,l._)("span",$t,(0,a.zw)(t.product.title),1)]),(0,l._)("td",null,[(0,l._)("div",It,[(0,l._)("span",{class:"material-icons text-primary p-2 qtyCounter",onClick:e=>b.qtyAdjust(t,-1)},"remove",8,Vt),(0,l._)("span",Ut,(0,a.zw)(t.qty),1),(0,l._)("span",{class:"material-icons text-primary p-2 qtyCounter",onClick:e=>b.qtyAdjust(t,1)},"add",8,jt)])]),(0,l._)("td",{class:(0,a.C_)(["text-end px-0 d-none d-sm-table-cell",{"text-success":t.coupon}])},[t.coupon?((0,l.wg)(),(0,l.iD)("small",Ot,"折扣價：")):(0,l.kq)("",!0),(0,l.Uk)(" $"+(0,a.zw)(parseInt(t.final_total)),1)],2)])))),128))]),(0,l._)("div",Wt,[(0,l._)("button",{class:"d-none d-sm-block btn btn-outline-danger me-2 me-sm-5",type:"button",onClick:e[4]||(e[4]=(...t)=>b.delAllCartProducts&&b.delAllCartProducts(...t))}," 清空購物車 "),(0,l.wy)((0,l._)("input",{type:"text",class:"form-control rounded-0",placeholder:"請輸入優惠碼","onUpdate:modelValue":e[5]||(e[5]=t=>d.coupon=t)},null,512),[[n.nr,d.coupon]]),(0,l._)("button",{class:"btn btn-outline-primary fw-bold",type:"button",onClick:e[6]||(e[6]=(...t)=>b.useCoupon&&b.useCoupon(...t))}," 套用優惠碼 ")]),(0,l._)("table",Lt,[At,d.cart.total===d.cart.final_total?((0,l.wg)(),(0,l.iD)("tr",Ft,[Nt,(0,l._)("td",Tt,"NT$ "+(0,a.zw)(d.cart.total),1)])):((0,l.wg)(),(0,l.iD)("tr",Ht,[Pt,(0,l._)("td",Et," NT$ "+(0,a.zw)(parseInt(d.cart.final_total)),1)]))]),(0,l._)("div",Yt,[(0,l._)("button",{type:"button",class:"btn btn-primary btn-lg text-white fw-bold",onClick:e[7]||(e[7]=t=>d.step=1)},"確認結帳")])])],64)):(0,l.kq)("",!0),0!==d.step?((0,l.wg)(),(0,l.iD)("div",Zt,[(0,l._)("div",Kt,[1===d.step?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",St,[Mt,(0,l._)("table",Bt,[Gt,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.cart.carts,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",Jt,[(0,l._)("img",{src:t.product.imageUrl,class:"productImg",alt:t.product.title},null,8,Qt),(0,l._)("span",Rt,(0,a.zw)(t.product.title),1)]),(0,l._)("td",Xt,(0,a.zw)(t.qty),1),(0,l._)("td",{class:(0,a.C_)(["text-end px-0",{"text-success":t.coupon}])},[t.coupon?((0,l.wg)(),(0,l.iD)("small",te,"折扣價：")):(0,l.kq)("",!0),(0,l.Uk)(" $"+(0,a.zw)(parseInt(t.final_total)),1)],2)])))),128))]),(0,l._)("table",ee,[se,d.cart.total===d.cart.final_total?((0,l.wg)(),(0,l.iD)("tr",le,[ae,(0,l._)("td",ne,"NT$ "+(0,a.zw)(d.cart.total),1)])):((0,l.wg)(),(0,l.iD)("tr",ce,[re,(0,l._)("td",de," NT$ "+(0,a.zw)(parseInt(d.cart.final_total)),1)]))])]),(0,l._)("div",oe,[ie,(0,l.Wm)(w,{class:"mt-3",onSubmit:b.createOrder},{default:(0,l.w5)((({errors:t})=>[(0,l._)("div",pe,[(0,l.Wm)(f,{id:"email",name:"email",type:"email",class:(0,a.C_)(["form-control",{"is-invalid":t["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:d.form.user.email,"onUpdate:modelValue":e[8]||(e[8]=t=>d.form.user.email=t)},null,8,["class","modelValue"]),ue,(0,l.Wm)(x,{name:"email",class:"invalid-feedback"})]),(0,l._)("div",me,[(0,l.Wm)(f,{id:"name",name:"姓名",type:"text",class:(0,a.C_)(["form-control",{"is-invalid":t["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:d.form.user.name,"onUpdate:modelValue":e[9]||(e[9]=t=>d.form.user.name=t)},null,8,["class","modelValue"]),be,(0,l.Wm)(x,{name:"姓名",class:"invalid-feedback"})]),(0,l._)("div",_e,[(0,l.Wm)(f,{id:"tel",name:"電話",type:"tel",class:(0,a.C_)(["form-control",{"is-invalid":t["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:d.form.user.tel,"onUpdate:modelValue":e[10]||(e[10]=t=>d.form.user.tel=t)},null,8,["class","modelValue"]),he,(0,l.Wm)(x,{name:"電話",class:"invalid-feedback"})]),(0,l._)("div",fe,[(0,l.Wm)(f,{id:"address",name:"地址",type:"text",class:(0,a.C_)(["form-control",{"is-invalid":t["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:d.form.user.address,"onUpdate:modelValue":e[11]||(e[11]=t=>d.form.user.address=t)},null,8,["class","modelValue"]),xe,(0,l.Wm)(x,{name:"地址",class:"invalid-feedback"})]),(0,l._)("div",ge,[(0,l.wy)((0,l._)("textarea",{class:"form-control",id:"ps",placeholder:"備註留言",style:{height:"150px"},"onUpdate:modelValue":e[12]||(e[12]=t=>d.form.message=t)},null,512),[[n.nr,d.form.message]]),we]),(0,l._)("div",ye,[(0,l._)("button",{type:"submit",class:"btn btn-primary btn-lg w-100 fw-bold text-white",disabled:!d.isFillIn,onSubmit:e[13]||(e[13]=(...t)=>b.createOrder&&b.createOrder(...t))},[d.isOrderLoading?((0,l.wg)(),(0,l.iD)("div",ke,De)):(0,l.kq)("",!0),qe],40,ve)])])),_:1},8,["onSubmit"])])],64)):(0,l.kq)("",!0),2===d.step?((0,l.wg)(),(0,l.iD)("div",ze,[$e,(0,l._)("div",Ie,[(0,l._)("div",Ve,[Ue,(0,l._)("div",je,[(0,l._)("div",Oe,[(0,l._)("table",We,[Le,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.order.products,(t=>((0,l.wg)(),(0,l.iD)("tr",{key:t.id},[(0,l._)("td",null,(0,a.zw)(t.product.title),1),(0,l._)("td",null,(0,a.zw)(t.qty)+" / "+(0,a.zw)(t.product.unit),1),(0,l._)("td",Ae,(0,a.zw)(t.total),1)])))),128))]),(0,l._)("tfoot",null,[(0,l._)("tr",null,[Fe,(0,l._)("td",Ne,(0,a.zw)(d.order.total),1)])])])])])])]),(0,l._)("table",Te,[(0,l._)("tbody",null,[(0,l._)("tr",null,[He,(0,l._)("td",null,(0,a.zw)(d.order.id),1)]),(0,l._)("tr",null,[Pe,(0,l._)("td",null,(0,a.zw)(d.order.user.email),1)]),(0,l._)("tr",null,[Ee,(0,l._)("td",null,(0,a.zw)(d.order.user.name),1)]),(0,l._)("tr",null,[Ye,(0,l._)("td",null,(0,a.zw)(d.order.user.tel),1)]),(0,l._)("tr",null,[Ze,(0,l._)("td",null,(0,a.zw)(d.order.user.address),1)]),(0,l._)("tr",null,[Ke,(0,l._)("td",null,(0,a.zw)(d.order.message),1)]),Se])]),(0,l._)("p",Me,"訂單成立時間："+(0,a.zw)(t.$filters.date(d.order.create_at)),1),(0,l._)("div",Be,[(0,l._)("button",{class:"btn btn-primary fs-5 text-white fw-bold w-100 py-3",onClick:e[14]||(e[14]=(...t)=>b.payOrder&&b.payOrder(...t))},"確認付款")])])):(0,l.kq)("",!0),3===d.step?((0,l.wg)(),(0,l.iD)("div",Ge,[(0,l._)("div",Je,[Qe,(0,l.Wm)(_,{to:"/products",class:"btn btn-primary fs-5 text-white fw-bold w-100 py-3"},{default:(0,l.w5)((()=>[Re])),_:1})])])):(0,l.kq)("",!0)])])):(0,l.kq)("",!0)])):((0,l.wg)(),(0,l.iD)("div",N,[T,H,(0,l.Wm)(_,{to:"/products",type:"button",class:"btn btn-primary fs-5 fw-bold text-white mt-3 px-4 py-3"},{default:(0,l.w5)((()=>[P])),_:1})]))])),(0,l.Wm)(y)],64)}var ts=s(8557),es=s(958),ss={data(){return{step:0,cart:{carts:[]},coupon:"",isLoading:!1,isOrderLoading:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""},isFillIn:!1,orderId:"",order:{}}},components:{Footer:es.Z},watch:{form:{handler(t){t.user.address&&t.user.tel&&t.user.email&&t.user.name&&(this.isFillIn=!0)},deep:!0}},methods:{getCart(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/vuefindcard/cart";this.$http.get(t).then((t=>{t.data.success&&(this.cart=t.data.data),this.isLoading=!1}))},delCartProduct(t){const e=`https://vue3-course-api.hexschool.io/api/vuefindcard/cart/${t}`;this.$http.delete(e).then((()=>{ts.Z.emit("update-cart"),this.getCart()}))},qtyAdjust(t,e){if(1===t.qty&&-1===e)return;t.qty+=e;const s=`https://vue3-course-api.hexschool.io/api/vuefindcard/cart/${t.id}`;this.$http.put(s,{data:{product_id:t.id,qty:t.qty}}).then((()=>{this.getCart()}))},delAllCartProducts(){const t="https://vue3-course-api.hexschool.io/api/vuefindcard/carts";this.$http.delete(t).then((()=>{ts.Z.emit("update-cart"),this.getCart()}))},useCoupon(){const t="https://vue3-course-api.hexschool.io/api/vuefindcard/coupon";this.$http.post(t,{data:{code:this.coupon}}).then((()=>{this.getCart(),this.$swal({title:"已套用優惠券",width:"15rem"}),this.coupon=""}))},createOrder(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/vuefindcard/order",e=this.form;this.$http.post(t,{data:e}).then((t=>{ts.Z.emit("update-cart"),this.orderId=t.data.orderId,this.getOrder(this.orderId),this.isLoading=!1,this.step=2}))},getOrder(t){const e=`https://vue3-course-api.hexschool.io/api/vuefindcard/order/${t}`;this.$http.get(e).then((t=>{this.order=t.data.order}))},payOrder(){const t=this.orderId,e=`https://vue3-course-api.hexschool.io/api/vuefindcard/pay/${t}`;this.$http.post(e).then((()=>{this.step=3}))}},created(){this.getCart()}},ls=s(89);const as=(0,ls.Z)(ss,[["render",Xe],["__scopeId","data-v-0b58b2d0"]]);var ns=as}}]);
//# sourceMappingURL=486.8dd59c5a.js.map